<mujoco model="arm3dof">
  <compiler angle="radian" autolimits="true"/>
  <option timestep="0.002"/>

  <default>
    <joint damping="0.05" armature="0.01"/>
    <geom  friction="0.8 0.1 0.1" margin="0.002" rgba="0.85 0.85 0.85 1"/>
    <position kp="150" forcerange="-50 50"/>
  </default>

  <!--  Longitudes (en metros): 
        base_altura = 0.106
        offset_hombro = 0.094   (desde eje base al pivote del hombro, en X)
        L1 = 0.344
        L2 = 0.350
  -->

  <worldbody>
    <!-- Base plana -->
    <body name="base" pos="0 0 0">
      <geom type="box" size="0.12 0.12 0.02" rgba="0.4 0.4 0.4 1"/>

      <!-- Columna + J1 (yaw) en la base -->
      <body name="column" pos="0 0 0.02">
        <joint name="j1_yaw" type="hinge" axis="0 0 1" range="-3.1416 3.1416"/>
        <geom type="capsule" fromto="0 0 0  0 0 0.106" size="0.04"/>

        <!-- Pivote del hombro: offset en X y a la altura de la columna -->
        <body name="shoulder_mount" pos="0.094 0 0.106">
          <!-- J2 hombro (pitch) -->
          <joint name="j2_shoulder" type="hinge" axis="0 1 0" range="-3.1416 3.1416"/>
          <!-- Link 1: cápsula de L1 a lo largo de +X -->
          <geom type="capsule" fromto="0 0 0  0.344 0 0" size="0.025"/>

          <!-- Codo ubicado al final del primer link -->
          <body name="elbow_mount" pos="0.344 0 0">
            <!-- J3 codo (pitch) -->
            <joint name="j3_elbow" type="hinge" axis="0 1 0" range="-3.1416 3.1416"/>
            <!-- Link 2: cápsula de L2 a lo largo de +X -->
            <geom type="capsule" fromto="0 0 0  0.350 0 0" size="0.022"/>

            <!-- Herramienta / gripper simplificado -->
            <body name="tool" pos="0.350 0 0">
              <geom type="box" size="0.03 0.02 0.02" rgba="0.1 0.7 0.2 1"/>
              <!-- Punto de interés del efector final -->
              <site name="ee" pos="0.06 0 0" size="0.007" rgba="0 1 0 1"/>
            </body>
          </body>
        </body>
      </body>
    </body>
  </worldbody>

  <actuator>
    <position name="m1" joint="j1_yaw"     kp="180"/>
    <position name="m2" joint="j2_shoulder" kp="180"/>
    <position name="m3" joint="j3_elbow"    kp="180"/>
    <position name="m4" joint="j4_wrist_yaw" kp="180"/>
    <position name="m5" joint="j5_wrist_pitch" kp="180"/>
    <position name="m6" joint="j6_gripper" kp="180"/>
  </actuator>

  <keyframe>
    <!-- Home: todos a 0 rad -->
    <key name="home" qpos="0 0 0" ctrl="0 0 0"/>
  </keyframe>
</mujoco>
